! This input file provides the adjustable run-time parameters for version 6 of the Modular Ocean Model (MOM6).
! Where appropriate, parameters use usually given in MKS units.

! This particular file is for the example in ISOMIP/layer.

! This MOM_input file typically contains only the non-default values that are needed to reproduce this example.
! A full list of parameters for this example can be found in the corresponding MOM_parameter_doc.all file
! which is generated by the model at run-time.

! === module MOM_domains ===
REENTRANT_X = False             !   [Boolean] default = True
                                ! If true, the domain is zonally reentrant.
!NIGLOBAL = 240                  !
NIGLOBAL = 50                  !
                                ! The total number of thickness grid points in the x-direction in the physical
                                ! domain. With STATIC_MEMORY_ this is set in MOM_memory.h at compile time.
!NJGLOBAL = 40                   !
NJGLOBAL = 100                   !
                                ! The total number of thickness grid points in the y-direction in the physical
                                ! domain. With STATIC_MEMORY_ this is set in MOM_memory.h at compile time.
! LAYOUT = 12, 2                !
                                ! The processor layout that was actually used.

! === module MOM ===
BULKMIXEDLAYER = False          !   [Boolean] default = True
                                ! If true, use a Kraus-Turner-like bulk mixed layer with transitional buffer
                                ! layers.  Layers 1 through NKML+NKBL have variable densities. There must be at
                                ! least NKML+NKBL+1 layers if BULKMIXEDLAYER is true. BULKMIXEDLAYER can not be
                                ! used with USE_REGRIDDING. The default is influenced by ENABLE_THERMODYNAMICS.
DT = 3000.0                      !   [s]
!DT = 200.0                      !   [s]
!DT = 100.0                      !   [s]
!DT = 50.0                      !   [s]
                                ! The (baroclinic) dynamics time step.  The time-step that is actually used will
                                ! be an integer fraction of the forcing time-step (DT_FORCING in ocean-only mode
                                ! or the coupling timestep in coupled mode.)
DTBT_RESET_PERIOD = 0.0         !   [s] default = 300.0
                                ! The period between recalculations of DTBT (if DTBT <= 0). If DTBT_RESET_PERIOD
                                ! is negative, DTBT is set based only on information available at
                                ! initialization.  If 0, DTBT will be set every dynamics time step. The default
                                ! is set by DT_THERM.  This is only used if SPLIT is true.
C_P = 3925.0                    !   [J kg-1 K-1] default = 3991.86795711963
                                ! The heat capacity of sea water, approximated as a constant. This is only used
                                ! if ENABLE_THERMODYNAMICS is true. The default value is from the TEOS-10
                                ! definition of conservative temperature.
SAVE_INITIAL_CONDS = True       !   [Boolean] default = False
                                ! If true, write the initial conditions to a file given by IC_OUTPUT_FILE.
IC_OUTPUT_FILE = "ISOMIP_IC"    ! default = "MOM_IC"
                                ! The file into which to write the initial conditions.
ICE_SHELF = True                !   [Boolean] default = False
                                ! If true, enables the ice shelf model.

! === module MOM_fixed_initialization ===
INPUTDIR = "INPUT"              ! default = "."
                                ! The directory in which input files are found.

! === module MOM_grid_init ===
!GRID_CONFIG = "cartesian"       !
GRID_CONFIG = "mosaic"       !
GRID_FILE = "ocean_hgrid_isomip.nc"

                                ! A character string that determines the method for defining the horizontal
                                ! grid.  Current options are:
                                !     mosaic - read the grid from a mosaic (supergrid)
                                !              file set by GRID_FILE.
                                !     cartesian - use a (flat) Cartesian grid.
                                !     spherical - use a simple spherical grid.
                                !     mercator - use a Mercator spherical grid.
!AXIS_UNITS = "degrees"                ! default = "degrees"
AXIS_UNITS = "k"                ! default = "degrees"
                                ! The units for the Cartesian axes. Valid entries are:
                                !     degrees - degrees of latitude and longitude
                                !     m - meters
                                !     k - kilometers
!SOUTHLAT = 0.0                  !   [k]
SOUTHLAT = -80.0                  !   [k]
!SOUTHLAT = 80.0                  !   [k]
                                ! The southern latitude of the domain or the equivalent starting value for the
                                ! y-axis.
!LENLAT = 80.0                   !   [k]
!LENLAT = 10.0                   !   [k]
LENLAT = 10.0                   !   [k]
                                ! The latitudinal or y-direction length of the domain.
!WESTLON = 320.0                 !   [k] default = 0.0
WESTLON = 0.0                 !   [k] default = 0.0
                                ! The western longitude of the domain or the equivalent starting value for the
                                ! x-axis.
!LENLON = 480.0                  !   [k]
!LENLON = 15.0                  !   [k]
LENLON = 15.0                  !   [k]
                                ! A character string that determines the method for defining the horizontal
                                ! grid.  Current options are:
                                !     mosaic - read the grid from a mosaic (supergrid)
                                !              file set by GRID_FILE.
                                !     cartesian - use a (flat) Cartesian grid.
                                !     spherical - use a simple spherical grid.
                                !     mercator - use a Mercator spherical grid.
TOPO_CONFIG = "ISOMIP"          !
MINIMUM_DEPTH = 9.0             !   [m] default = 0.0
MAXIMUM_DEPTH = 930.0           !   [m]

! === module MOM_verticalGrid ===

NK = 30                         !   [nondim]

! === module ISOMIP_initialize_topography ===
F_0 = -1.408706225059977E-04    !   [s-1] default = 0.0
                                ! The reference value of the Coriolis parameter with the betaplane option.

! === module MOM_EOS ===
EQN_OF_STATE = "LINEAR"         ! default = "WRIGHT"
                                ! EQN_OF_STATE determines which ocean equation of state should be used.
                                ! Currently, the valid choices are "LINEAR", "UNESCO", "WRIGHT", "NEMO" and
                                ! "TEOS10". This is only used if USE_EOS is true.
RHO_T0_S0 = 999.9106806711001   !   [kg m-3] default = 1000.0
                                ! When EQN_OF_STATE=LINEAR, this is the density at T=0, S=0.
DRHO_DT = -0.0383569483         !   [kg m-3 K-1] default = -0.2
                                ! When EQN_OF_STATE=LINEAR, this is the partial derivative of density with
                                ! temperature.
DRHO_DS = 0.805876093           !   [kg m-3 PSU-1] default = 0.8
                                ! When EQN_OF_STATE=LINEAR, this is the partial derivative of density with
                                ! salinity.
TFREEZE_FORM = "MILLERO_78"     ! default = "LINEAR"
                                ! TFREEZE_FORM determines which expression should be used for the freezing
                                ! point.  Currently, the valid choices are "LINEAR", "MILLERO_78", "TEOS10"

! === module MOM_tracer_flow_control ===

! === module MOM_coord_initialization ===
!!!! from mom6-panan !!!!
!! don't define layers in ALE mode

USE_REGRIDDING = True

COORD_CONFIG = "ALE"

REGRIDDING_COORDINATE_MODE = "ZSTAR"

! use high-order scheme at boundary cells for remapping,
! instead of just piecewise-constant
!BOUNDARY_EXTRAPOLATION = True

! read target densities from file, set minimum interface depth
! from profile: minimum dz=2, 4000m total thickness, profile is dz^4.5
ALE_COORDINATE_CONFIG = "FILE:vert_isomip.nc,interfaces=st_edges_ocean"

REMAPPING_SCHEME = "PPM_H4"
!!!! from mom6-panan !!!!

! === module MOM_domains min_halo ===

! === module MOM_grid_init ===

! === module ISOMIP_initialize_topography ===

! === module MOM_ice_shelf ===
SHELF_THERMO = False

IGNORE_FLUXES_OVER_LAND = True

SHELF_THREE_EQN = False         !   [Boolean] default = True
                                ! If true, use the three equation expression of consistency to calculate the
                                ! fluxes at the ice-ocean interface.
!SHELF_2EQ_GAMMA_T = 1.0E-04     !   [m s-1]
SHELF_2EQ_GAMMA_T = 0.0001     !   [m s-1]
                                ! If SHELF_THREE_EQN is false, this the fixed turbulent exchange velocity at the
                                ! ice-ocean interface.
ICE_SHELF_FLUX_FACTOR = 1.0     !   [none] default = 1.0
!ICE_SHELF_FLUX_FACTOR = 0.1     !   [none] default = 1.0
                                ! Non-dimensional factor applied to shelf thermodynamic fluxes.
ICE_SHELF_TEMPERATURE = -20.0   !   [degC] default = -15.0
                                ! The ISS%area_shelf_htemperature at the center of the ice shelf.
DT_FORCING = 3000.0              !   [s] default = 0.0
                                ! The time step for changing forcing, coupling with other components, or
                                ! potentially writing certain diagnostics. The default value is given by DT.
!COL_THICK_MELT_THRESHOLD = 1.0  !   [m] default = 0.0
COL_THICK_MELT_THRESHOLD = 10.0  !   [m] default = 0.0
                                ! The minimum ocean column thickness where melting is allowed.
SHELF_INSULATOR = True

! === module MOM_EOS ===
USTAR_SHELF_BG = 0.001          !   [m s-1] default = 0.0
                                ! The minimum value of ustar under ice shelves.
CDRAG_SHELF = 0.0025            !   [nondim] default = 0.003
                                ! CDRAG is the drag coefficient relating the magnitude of the velocity field to
                                ! the surface stress.
!ICE_PROFILE_CONFIG = "FILE"     !
ICE_PROFILE_CONFIG = "CHANNEL"     !
                                ! This specifies how the initial ice profile is specified. Valid values are:
                                ! CHANNEL, FILE, and USER.
ICE_THICKNESS_FILE = "Ocean1_3D.nc" ! default = "ice_shelf_h.nc"
                                ! The file from which the ice bathymetry and area are read.
ICE_THICKNESS_VARNAME = "thick" ! default = "h_shelf"
                                ! The name of the thickness variable in ICE_THICKNESS_FILE.
ICE_AREA_VARNAME = "area"       ! default = "area_shelf_h"
                                ! The name of the area variable in ICE_THICKNESS_FILE.
METHOD_ISOMIP = 1
SHELF_MIN_DRAFT = 233
SHELF_MAX_DRAFT = 815
FLAT_SHELF_WIDTH = 6
SHELF_SLOPE_SCALE = 4
SHELF_EDGE_POS_0 = -70

! === module MOM_state_initialization ===
THICKNESS_CONFIG = "ISOMIP"     ! default = "uniform"
MIN_THICKNESS = 1.0E-12         !   [m] default = 0.001
TS_CONFIG = "fit"               !
T_REF = -1.9                    !   [degC]
FIT_SALINITY = True             !   [Boolean] default = False
TRIM_IC_FOR_P_SURF = False       !   [Boolean] default = False
                                ! If true, cuts way the top of the column for initial conditions at the depth
                                ! where the hydrostatic pressure matches the imposed surface pressure which is
                                ! read from file.
SURFACE_PRESSURE_FILE = "ocean_daily_z.nc" !
                                ! The initial condition file for the surface pressure exerted by ice.
SURFACE_PRESSURE_VAR = "h_shelf"  !   [Pa] default = ""
                                ! The initial condition variable for the surface pressure exerted by ice.
SURFACE_PRESSURE_SCALE = 8820.0 !   [file dependent] default = 1.0
!SURFACE_PRESSURE_SCALE = 10280.0 !   [file dependent] default = 1.0
                                ! A scaling factor to convert SURFACE_PRESSURE_VAR from file
                                ! SURFACE_PRESSURE_FILE into a surface pressure.





! initialise states from the nested Z-space file
!INIT_LAYERS_FROM_Z_FILE = True
! if we've pre-interpolated the initial conditions,
! we only have to perform remapping
TEMP_SALT_INIT_VERTICAL_REMAP_ONLY = True

! === module MOM_initialize_layers_from_Z ===
! read "temp" and "salt" from a z-space file
!TEMP_SALT_Z_INIT_FILE = "forcing/temp_salt_init_z.nc"
!Z_INIT_FILE_PTEMP_VAR = "temp"
! remap straight to the model coordinate
!Z_INIT_ALE_REMAPPING = True

! === module MOM_diag_mediator ===

! === module MOM_lateral_mixing_coeffs ===

! === module MOM_set_visc ===
!HBBL = 10.0                     !   [m]
                                ! The thickness of a bottom boundary layer with a viscosity of KVBBL if
                                ! BOTTOMDRAGLAW is not defined, or the thickness over which near-bottom
                                ! velocities are averaged for the drag law if BOTTOMDRAGLAW is defined but
                                ! LINEAR_DRAG is not.
!BBL_USE_EOS = True             !   [Boolean] default = False
                                ! If true, use the equation of state in determining the properties of the bottom
                                ! boundary layer.  Otherwise use the layer target potential densities.  The
                                ! default of this is determined by USE_REGRIDDING.
!BBL_THICK_MIN = 2.0             !   [m] default = 0.0
                                ! The minimum bottom boundary layer thickness that can be used with
                                ! BOTTOMDRAGLAW. This might be Kv/(cdrag*drag_bg_vel) to give Kv as the minimum
                                ! near-bottom viscosity.
!KV = 1.0E-04                    !   [m2 s-1]
                                ! The background kinematic viscosity in the interior. The molecular value, ~1e-6
                                ! m2 s-1, may be used.
!KV_TBL_MIN = 0.01               !   [m2 s-1] default = 1.0E-04
                                ! The minimum viscosities in the top boundary layer.

!!!! mom panan
CHANNEL_DRAG = True
PRANDTL_TURB = 1.25
HBBL = 10.0
DRAG_BG_VEL = 0.1
BBL_USE_EOS = True
BBL_THICK_MIN = 0.1
KV = 0!  1.0E-04
KV_BBL_MIN = 0.0
KV_TBL_MIN = 0.0


! === module MOM_thickness_diffuse ===
KHTH_MAX_CFL = 0.1

! === module MOM_dynamics_split_RK2 ===
BE = 0.7                        !   [nondim] default = 0.6
                                ! If SPLIT is true, BE determines the relative weighting of a  2nd-order
                                ! Runga-Kutta baroclinic time stepping scheme (0.5) and a backward Euler scheme
                                ! (1) that is used for the Coriolis and inertial terms.  BE may be from 0.5 to
                                ! 1, but instability may occur near 0.5. BE is also applicable if SPLIT is false
                                ! and USE_RK2 is true.

! === module MOM_continuity ===

! === module MOM_continuity_PPM ===
ETA_TOLERANCE = 1.0E-12         !   [m] default = 1.25E-14
                                ! The tolerance for the differences between the barotropic and baroclinic
                                ! estimates of the sea surface height due to the fluxes through each face.  The
                                ! total tolerance for SSH is 4 times this value.  The default is
                                ! 0.5*NK*ANGSTROM, and this should not be set less than about


! === module MOM_CoriolisAdv ===
CORIOLIS_EN_DIS = True          !   [Boolean] default = False
                                ! If true, two estimates of the thickness fluxes are used to estimate the
                                ! Coriolis term, and the one that dissipates energy relative to the other one is
                                ! used.
BOUND_CORIOLIS = True           !   [Boolean] default = False
                                ! If true, the Coriolis terms at u-points are bounded by the four estimates of
                                ! (f+rv)v from the four neighboring v-points, and similarly at v-points.  This
                                ! option is always effectively false with CORIOLIS_EN_DIS defined and
                                ! CORIOLIS_SCHEME set to SADOURNY75_ENERGY.

! === module MOM_PressureForce ===

! === module MOM_PressureForce_FV ===
MASS_WEIGHT_IN_PRESSURE_GRADIENT = True !   [Boolean] default = False
                                ! If true, use mass weighting when interpolating T/S for integrals near the
                                ! bathymetry in FV pressure gradient calculations.

! === module MOM_hor_visc ===
LAPLACIAN = True                !   [Boolean] default = False
                                ! If true, use a Laplacian horizontal viscosity.
AH_VEL_SCALE = 0.001            !   [m s-1] default = 0.0
!AH_VEL_SCALE = 0.000000001            !   [m s-1] default = 0.0
                                ! The velocity scale which is multiplied by the cube of the grid spacing to
                                ! calculate the biharmonic viscosity. The final viscosity is the largest of this
                                ! scaled viscosity, the Smagorinsky and Leith viscosities, and AH.
SMAGORINSKY_AH = True           !   [Boolean] default = False
                                ! If true, use a biharmonic Smagorinsky nonlinear eddy viscosity.
SMAG_BI_CONST = 0.06            !   [nondim] default = 0.0
                                ! The nondimensional biharmonic Smagorinsky constant, typically 0.015 - 0.06.

! === module MOM_vert_friction ===
HARMONIC_BL_SCALE = 1.0         !   [nondim] default = 0.0
                                ! A scale to determine when water is in the boundary layers based solely on
                                ! harmonic mean thicknesses for the purpose of determining the extent to which
                                ! the thicknesses used in the viscosities are upwinded.
HMIX_FIXED = 20.0               !   [m]
                                ! The prescribed depth over which the near-surface viscosity and diffusivity are
                                ! elevated when the bulk mixed layer is not used.
KVML = 0.01                     !   [m2 s-1] default = 1.0E-04
                                ! The kinematic viscosity in the mixed layer.  A typical value is ~1e-2 m2 s-1.
                                ! KVML is not used if BULKMIXEDLAYER is true.  The default is set by KV.
MAXVEL = 10.0                   !   [m s-1] default = 3.0E+08
                                ! The maximum velocity allowed before the velocity components are truncated.

! === module MOM_barotropic ===
BOUND_BT_CORRECTION = True      !   [Boolean] default = False
                                ! If true, the corrective pseudo mass-fluxes into the barotropic solver are
                                ! limited to values that require less than maxCFL_BT_cont to be accommodated.
DYNAMIC_SURFACE_PRESSURE = True !   [Boolean] default = False
                                ! If true, add a dynamic pressure due to a viscous ice shelf, for instance.
BEBT = 0.2                      !   [nondim] default = 0.1
                                ! BEBT determines whether the barotropic time stepping uses the forward-backward
                                ! time-stepping scheme or a backward Euler scheme. BEBT is valid in the range
                                ! from 0 (for a forward-backward treatment of nonrotating gravity waves) to 1
                                ! (for a backward Euler treatment). In practice, BEBT must be greater than about
                                ! 0.05.
DTBT = -0.9                     !   [s or nondim] default = -0.98
                                ! The barotropic time step, in s. DTBT is only used with the split explicit time
                                ! stepping. To set the time step automatically based the maximum stable value
                                ! use 0, or a negative value gives the fraction of the stable value. Setting
                                ! DTBT to 0 is the same as setting it to -0.98. The value of DTBT that will
                                ! actually be used is an integer fraction of DT, rounding down.

! === module MOM_diagnostics ===

! === module MOM_diabatic_driver ===
! The following parameters are used for diabatic processes.

! === module MOM_entrain_diffusive ===
MAX_ENT_IT = 20                 ! default = 5
                                ! The maximum number of iterations that may be used to calculate the interior
                                ! diapycnal entrainment.
TOLERANCE_ENT = 1.0E-08         !   [m] default = 1.0E-13
                                ! The tolerance with which to solve for entrainment values.

! === module MOM_set_diffusivity ===
!output345 BBL_EFFIC = 0.0                 !   [nondim] default = 0.2
                                ! The efficiency with which the energy extracted by bottom drag drives BBL
                                ! diffusion.  This is only used if BOTTOMDRAGLAW is 
BBL_EFFIC = 0.0
!!! mom6-panan
!BBL_MIXING_AS_MAX = False
!USE_LOTW_BBL_DIFFUSIVITY = True
!SIMPLE_TKE_TO_KD = True
!HENYEY_IGW_BACKGROUND = True
!N2_FLOOR_IOMEGA2 = 0.0
!output345 KD = 1.5E-05
!KD = 0
!KD_MIN = 0
!KD_MAX = 1.0E-06

! === module MOM_bkgnd_mixing ===
! Adding static vertical background mixing coefficients

! === module MOM_diabatic_aux ===
! The following parameters are used for auxiliary diabatic processes.

! === module MOM_opacity ===
PEN_SW_SCALE = 15.0             !   [m] default = 0.0
                                ! The vertical absorption e-folding depth of the penetrating shortwave
                                ! radiation.
PEN_SW_FRAC = 0.42              !   [nondim] default = 0.0
                                ! The fraction of the shortwave radiation that penetrates below the surface.

! === module MOM_tracer_advect ===

! === module MOM_tracer_hor_diff ===

! === module MOM_sum_output ===
CALCULATE_APE = False           !   [Boolean] default = True
                                ! If true, calculate the available potential energy of the interfaces.  Setting
                                ! this to false reduces the memory footprint of high-PE-count models
                                ! dramatically.
MAXTRUNC = 5000                 !   [truncations save_interval-1] default = 0
                                ! The run will be stopped, and the day set to a very large value if the velocity
                                ! is truncated more than MAXTRUNC times between energy saves.  Set MAXTRUNC to 0
                                ! to stop if there is any truncation of velocities.
DATE_STAMPED_STDOUT = False     !   [Boolean] default = True
                                ! If true, use dates (not times) in messages to stdout
ENERGYSAVEDAYS = 0.125          !   [days] default = 1.0
                                ! The interval in units of TIMEUNIT between saves of the energies of the run and
                                ! other globally summed diagnostics.

!!!!! panan !!!!!
REPORT_UNUSED_PARAMS = True
!FATAL_UNUSED_PARAMS = True

NUM_DIAG_COORDS = 2
DIAG_COORDS = "z Z ZSTAR", "rho2 RHO2 RHO"
DIAG_COORD_DEF_Z = "FILE:vert_isomip.nc,interfaces=st_edges_ocean"
! drho (arg 5) is a bit magic and has a big impact on
! the tail of the coord...
DIAG_COORD_DEF_RHO2 = "FILE:diag_rho2.nc,interfaces=rho2"
!!!!! panan !!!!!

! === module MOM_surface_forcing ===
VARIABLE_WINDS = False          !   [Boolean] default = True
                                ! If true, the winds vary in time after the initialization.
VARIABLE_BUOYFORCE = False      !   [Boolean] default = True
                                ! If true, the buoyancy forcing varies in time after the initialization of the
                                ! model.
BUOY_CONFIG = "NONE"            ! default = "zero"
                                ! The character string that indicates how buoyancy forcing is specified. Valid
                                ! options include (file), (zero), (linear), (USER), (BFB) and (NONE).
GUST_CONST = 0.02               !   [Pa] default = 0.0
                                ! The background gustiness in the winds.

! === module MOM_main (MOM_driver) ===
!DAYMAX = 10.0                   !   [days]
                                ! The final time of the whole simulation, in units of TIMEUNIT seconds.  This
                                ! also sets the potential end time of the present run segment if the end time is
                                ! not set via ocean_solo_nml in input.nml.
!RESTART_CONTROL = -1            ! default = 1
                                ! An integer whose bits encode which restart files are written. Add 2 (bit 1)
                                ! for a time-stamped file, and odd (bit 0) for a non-time-stamped file. A
                                ! non-time-stamped restart file is saved at the end of the run segment for any
                                ! non-negative value.
!RESTINT = 240.0                 !   [days] default = 0.0
                                ! The interval between saves of the restart file in units of TIMEUNIT.  Use 0
                                ! (the default) to not save incremental restart files at all.

! === module MOM_write_cputime ===
MAXCPU = 2.88E+04               !   [wall-clock seconds] default = -1.0
                                ! The maximum amount of cpu time per processor for which MOM should run before
                                ! saving a restart file and quitting with a return value that indicates that a
                                ! further run is required to complete the simulation. If automatic restarts are
                                ! not desired, use a negative value for MAXCPU.  MAXCPU has units of wall-clock
                                ! seconds, so the actual CPU time used is larger by a factor of the number of
                                ! processors used.

! Debugging parameters set to non-default values
U_TRUNC_FILE = "U_velocity_truncations" ! default = ""
                                ! The absolute path to a file into which the accelerations leading to zonal
                                ! velocity truncations are written. Undefine this for efficiency if this
                                ! diagnostic is not needed.
V_TRUNC_FILE = "V_velocity_truncations" ! default = ""
                                ! The absolute path to a file into which the accelerations leading to meridional
                                ! velocity truncations are written. Undefine this for efficiency if this
                                ! diagnostic is not needed.

